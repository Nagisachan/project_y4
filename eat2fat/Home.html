<!DOCTYPE html>
<html>
	<head>
		<title>Eat2Fat</title>
		<link rel="stylesheet" type="text/css" href="CSS.css">
		<meta charset="utf-8">
	</head>
	<body class="bodyhome">
		<div class="menubar">
			<img class="logomenubar" src="Pic/Logo.png">
			<input class="labelmenubar" type="button" value="Home" onclick="window.location.href='Home.html'">
			<input class="labelmenubar" type="button" value="Kitchen" onclick="window.location.href='Kitchen.html'">
			<input class="labelmenubar" type="button" value="Eat" onclick="window.location.href='Eat.html'">
			<input class="labelmenubar" type="button" value="Shop" onclick="window.location.href='Shop.html'">
			<input class="labelmenubar" type="button" value="Sell" onclick="window.location.href='Sell.html'">
			<input class="labelmenubar" type="button" value="Logout" onclick="window.location.href='Logout.php'">
		</div>

		<div class="leftBox" style="height: 98px; padding: 5px;">
			<center><button onclick="receive()" class="buttonReceive">Click for<br>Receive Foods</button></center>
		</div>

		<div class="home">
			<center>
				<svg height="450px" width="780px" id="character">
				</svg>
			</circle>
		</div>

		<div class="infobar">
			<img class="picinfobar" src="Pic/Profile.png">
			<div class="labelinfobar" id="showUsername"></div>
			<div class="labelinfobar" id="showWeight"></div>
			<div class="labelinfobar" id="showEmoney"></div>
		</div>

		<script type="text/javascript">
			loadPlayer();
			
			function receive()
			{
				var xmlhttp = new XMLHttpRequest();
				var url = "Receive_Button.php";
				xmlhttp.onreadystatechange=function()
				{
					if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
					{
						if(xmlhttp.responseText != "false")
						{
							alert("You are received\n" + xmlhttp.responseText);
						}
						else
						{
							alert("Failed");
						}
					}
				}
				xmlhttp.open("GET", url, true);
				xmlhttp.send();
			}

			function loadPlayer()
			{
				var xmlhttp = new XMLHttpRequest();
				var url = "GetPlayerInformation.php";
				xmlhttp.onreadystatechange=function()
				{
					if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
					{
						displayResponsePlayer(xmlhttp.responseText);
					}
				}
				xmlhttp.open("GET", url, true);
				xmlhttp.send();
			}

			function displayResponsePlayer(response)
			{
				var arr = JSON.parse(response);
				document.getElementById("showUsername").innerHTML = arr[0].playerID;
				document.getElementById("showWeight").innerHTML = "Weight : " + arr[0].playerWeight + " kg";
				document.getElementById("showEmoney").innerHTML = "E Money : " + arr[0].playerMoney;
				
				var weight = parseFloat(arr[0].playerWeight);
				var out="";
				// Max=195 Min=50
				var r = 50 + ((weight - 20) * (195-50) / (500-5));
				if(r > 195)
				{
					r = 195;
				}
				else if(r < 50)
				{
					r = 50;
				}
				var TheadX = -59.01 + 390;
				var TheadY = 230- (-117.02 + r + (450-300));
				var TleftX = (-35.63 + (Math.cos(150*Math.PI/180)*r) + 390) - 3;
				var TleftY = 450 - (-2.76 + (Math.sin(150*Math.PI/180)*r) + (450-300));
				var TrightX = (-15.93 + (Math.cos(30*Math.PI/180)*r) + 390) + 3;
				var TrightY = 450 - (-2.83 + (Math.sin(30*Math.PI/180)*r) + (450-300));

				out = "<circle cx=\"390\" cy=\"300\" r=\"" + r + "\" fill=\"#FF5252\" />";

				// X=59.01 Y=117.02
				out += "<g transform=\"scale(1) translate("+TheadX+","+TheadY+")\">";
				out += "<circle style=\"fill:#F9CD87;\" cx=\"59.01\" cy=\"59.009\" r=\"58.01\"/>"
				out += "<g><path d=\"M46.156,46.475c-0.365,0-0.728-0.157-0.979-0.459c-2.582-3.112-5.366-4.69-8.277-4.69c-5.04,0-8.949,4.643-8.988,4.689c-0.447,0.542-1.249,0.616-1.789,0.167c-0.54-0.448-0.615-1.249-0.167-1.789c0.19-0.229,4.724-5.608,10.944-5.609c3.703,0,7.146,1.887,10.233,5.609c0.448,0.541,0.374,1.341-0.166,1.79C46.729,46.378,46.442,46.475,46.156,46.475z\"/></g>";
				out += "<g><path d=\"M92.803,47.185c-0.365,0-0.728-0.156-0.979-0.459c-2.577-3.106-5.357-4.685-8.262-4.689c-0.005,0-0.01,0-0.015,0c-5.013,0-8.951,4.645-8.99,4.691c-0.449,0.538-1.25,0.611-1.789,0.163c-0.539-0.449-0.613-1.248-0.166-1.788c0.19-0.229,4.725-5.608,10.945-5.608c0,0,0,0,0,0c3.702,0,7.145,1.887,10.231,5.608c0.448,0.541,0.374,1.341-0.166,1.79C93.376,47.089,93.089,47.185,92.803,47.185z\"/></g>";
				out += "<g><g><path style=\"fill:#FF5252;\" d=\"M59.057,97.885c-4.362,0-7.913-1.401-10.553-4.165c-5.478-5.735-5.109-15.231-5.09-15.633c0.016-0.339,0.295-0.606,0.635-0.606h30.018c0.351,0,0.635,0.284,0.635,0.635C74.701,78.314,74.522,97.885,59.057,97.885z\"/></g>";
				out += "<g><path style=\"fill:#FF5252;\" d=\"M74.065,78.116c0,0,0,19.134-15.009,19.134c-15.886,0-15.009-19.134-15.009-19.134H74.065M74.065,76.845H44.048c-0.679,0-1.238,0.534-1.27,1.212c-0.019,0.413-0.398,10.171,5.266,16.102c2.765,2.894,6.469,4.361,11.012,4.361c16.094,0,16.28-20.2,16.28-20.405C75.336,77.414,74.767,76.845,74.065,76.845L74.065,76.845z\"/></g></g>";
				out += "<g style=\"opacity:0.25;\"><path style=\"fill:#FF8A80;\" d=\"M16.312,78.592c-0.106,0-0.211-0.035-0.295-0.103c-0.107-0.084-0.173-0.211-0.18-0.348c-0.109-2.014,0.901-3.633,1.878-5.199c0.344-0.551,0.68-1.09,0.96-1.631c-1.101,1.313-2.23,2.781-3.462,4.499c-0.14,0.195-0.401,0.255-0.612,0.143c-0.21-0.113-0.305-0.364-0.221-0.587c0.439-1.174,0.973-2.405,1.488-3.596c0.516-1.191,1.044-2.412,1.504-3.625c-1.625,1.269-3.601,3.08-4.208,4.536c-0.102,0.243-0.383,0.355-0.623,0.257c-0.243-0.101-0.358-0.38-0.257-0.623c1.059-2.543,5.302-5.535,5.782-5.868c0.167-0.118,0.391-0.114,0.556,0.009c0.164,0.122,0.232,0.335,0.169,0.529c-0.561,1.726-1.317,3.473-2.049,5.163c-0.01,0.023-0.02,0.046-0.03,0.069c0.951-1.209,1.863-2.288,2.781-3.289c0.14-0.152,0.36-0.197,0.547-0.112s0.3,0.28,0.278,0.485c-0.163,1.529-0.992,2.859-1.795,4.145c-0.831,1.331-1.621,2.597-1.729,4.056c1.528-0.505,2.896-1.857,4.222-3.17c0.659-0.652,1.281-1.268,1.919-1.779c0.158-0.127,0.38-0.141,0.552-0.031c0.172,0.108,0.256,0.314,0.21,0.512c-0.212,0.896-0.591,1.738-0.958,2.551c-0.305,0.676-0.592,1.313-0.779,1.96c-0.073,0.253-0.337,0.397-0.59,0.326c-0.253-0.073-0.399-0.338-0.326-0.59c0.206-0.712,0.521-1.412,0.827-2.087c0.097-0.215,0.195-0.433,0.29-0.652c-0.156,0.153-0.313,0.309-0.474,0.467c-1.518,1.502-3.238,3.204-5.291,3.576C16.368,78.59,16.34,78.592,16.312,78.592z\"/></g>";
				out += "<g style=\"opacity:0.25;\"><path style=\"fill:#FF8A80;\" d=\"M102.765,77.803c-0.056,0-0.114-0.01-0.17-0.032c-0.246-0.094-0.369-0.37-0.274-0.616l0.025-0.062c-0.012,0.006-0.023,0.013-0.034,0.019c-0.292,0.16-0.567,0.312-0.797,0.52c-0.151,0.137-0.371,0.162-0.549,0.064c-0.178-0.097-0.274-0.297-0.24-0.498c0.173-1.01,0.64-1.901,1.22-2.732c-0.631,0.41-1.3,0.684-2.002,0.705c-0.274,0.008-0.471-0.189-0.49-0.443c-0.06-0.843,0.229-1.561,0.508-2.254c0.073-0.184,0.146-0.363,0.211-0.542c-0.991,0.702-1.857,1.859-2.702,2.988c-0.518,0.69-1.006,1.343-1.521,1.893c-0.148,0.156-0.385,0.194-0.573,0.093c-0.19-0.102-0.288-0.32-0.238-0.53c0.602-2.509,1.674-4.419,2.886-6.276c-1.319,0.676-2.343,1.467-3.331,2.547c-0.179,0.193-0.479,0.207-0.674,0.03c-0.194-0.178-0.208-0.479-0.03-0.673c1.437-1.57,2.937-2.572,5.175-3.459c0.193-0.077,0.416-0.019,0.547,0.145c0.131,0.164,0.14,0.393,0.023,0.565c-1.103,1.632-2.101,3.109-2.846,4.852c1.115-1.485,2.283-2.968,3.84-3.548c0.156-0.057,0.33-0.029,0.46,0.071c0.13,0.103,0.198,0.265,0.18,0.43c-0.074,0.656-0.303,1.224-0.523,1.772c-0.18,0.446-0.352,0.874-0.418,1.31c1.262-0.344,2.514-1.733,3.544-2.875c0.467-0.518,0.907-1.006,1.315-1.366c0.168-0.148,0.42-0.158,0.6-0.025c0.181,0.134,0.243,0.376,0.149,0.582c-0.497,1.082-1.294,2.042-2.064,2.972c-0.756,0.913-1.484,1.789-1.927,2.746c0.226-0.127,0.436-0.257,0.613-0.423c0.119-0.112,0.291-0.156,0.448-0.114c0.159,0.042,0.285,0.163,0.333,0.319c0.177,0.567,0.016,0.954-0.14,1.329l-0.086,0.213C103.137,77.686,102.957,77.803,102.765,77.803z\"/></g>";
				out += "</g>";

				out += "<g transform=\"scale(1)\">";
	  			// X=35.63 Y=2.76
	  			out += "<path transform=\"translate("+TleftX+","+TleftY+")\" style=\"fill:#F9CD87;\" d=\"M40.553,38.704c0.042,2.442,0.373,6.688-3.34,6.295c-3.537-0.375-2.935-5.177-2.953-7.705c-0.012-1.6,0.045-3.199,0.153-4.794c0.116-1.685-0.447-2.388-2.213-1.942c-3.044,0.772-5.146,3.182-7.188,5.394c-2.292,2.485-4.585,4.977-6.845,7.491c-1.722,1.915-5.208,4.221-6.718,0.595c-0.896-2.156,1.598-4.293,2.833-5.726c2.434-2.823,5.091-5.512,7.406-8.43c-3.03,1.49-5.869,3.722-8.758,5.488c-1.484,0.908-2.979,1.798-4.496,2.65c-1.228,0.691-2.315,1.186-3.612,0.273c-1.092-0.77-1.787-2.314-1.269-3.615c0.722-1.809,2.611-2.349,4.104-3.321c3.21-2.088,6.414-4.184,9.641-6.244c-3.3,1.037-6.646,1.918-9.946,2.96c-2.399,0.779-6.741,1.196-6.184-2.768c0.444-3.149,5.96-3.786,8.404-4.59c1.725-0.566,3.447-1.137,5.17-1.708c0.605-0.201,2.933-0.595,3.276-1.294c-0.734-0.413-1.753-0.426-2.561-0.629c-1.11-0.281-2.21-0.602-3.31-0.923c-1.234-0.36-2.475-0.771-3.736-1.02c-1.067-0.209-2.222-0.315-3.097-1.031c-1.555-1.273-1.202-3.924,0.417-4.973c1.661-1.075,4.451,0,6.235,0.339c2.312,0.438,4.676,0.778,6.948,1.388c2.322,0.624,3.775-0.288,5.97-1.04c2.229-0.764,4.495-1.443,6.714-2.234c1.655-0.591,2.778-3.426,4.028-4.833c2.805-3.155,5.731,0.167,8.328,1.57c1.675,0.903,4.488,1.833,5.146,3.844c0.49,1.501-0.895,3.513-1.502,4.781c-0.899,1.876-1.617,3.832-2.386,5.765c-0.819,2.062-2.003,4.207-2.453,6.382c-0.466,2.254-0.324,4.597-0.856,6.84C41.349,34.289,40.512,36.244,40.553,38.704\"/>"
	  			// X=15.93 Y=2.83
	  			out += "<path transform=\"translate("+TrightX+","+TrightY+")\" style=\"fill:#F9CD87;\" d=\"M11.004,38.777c-0.042,2.442-0.373,6.688,3.34,6.295c3.537-0.375,2.935-5.177,2.953-7.705c0.012-1.6-0.045-3.199-0.153-4.794c-0.116-1.685,0.447-2.388,2.213-1.942c3.044,0.772,5.146,3.182,7.188,5.394c2.292,2.485,4.585,4.977,6.845,7.491c1.722,1.915,5.208,4.221,6.718,0.595c0.896-2.156-1.598-4.293-2.833-5.726c-2.434-2.823-5.091-5.512-7.406-8.43c3.03,1.49,5.869,3.722,8.758,5.488c1.484,0.908,2.979,1.798,4.496,2.65c1.228,0.691,2.315,1.186,3.612,0.273c1.092-0.77,1.787-2.314,1.269-3.615c-0.722-1.809-2.611-2.349-4.104-3.321c-3.21-2.088-6.414-4.184-9.641-6.244c3.3,1.037,6.646,1.918,9.946,2.96c2.399,0.779,6.741,1.196,6.184-2.768c-0.444-3.149-5.96-3.786-8.404-4.59c-1.725-0.566-3.447-1.137-5.17-1.708c-0.605-0.201-2.933-0.595-3.276-1.294c0.734-0.413,1.753-0.426,2.561-0.629c1.11-0.281,2.21-0.602,3.31-0.923c1.234-0.36,2.475-0.771,3.736-1.02c1.067-0.209,2.222-0.315,3.097-1.031c1.555-1.273,1.202-3.924-0.417-4.973c-1.661-1.075-4.451,0-6.235,0.339c-2.312,0.438-4.676,0.778-6.948,1.388c-2.322,0.624-3.775-0.288-5.97-1.04c-2.229-0.764-4.495-1.443-6.714-2.234c-1.655-0.591-2.778-3.426-4.028-4.833C13.122-0.322,10.195,3,7.599,4.403C5.924,5.306,3.11,6.235,2.452,8.247c-0.49,1.501,0.895,3.513,1.502,4.781c0.899,1.876,1.617,3.832,2.386,5.765c0.819,2.062,2.003,4.207,2.453,6.382c0.466,2.254,0.324,4.597,0.856,6.84C10.208,34.362,11.045,36.317,11.004,38.777\"/>"
	  			out += "</g>";

	  			document.getElementById("character").innerHTML = out;
			}
		</script>
	</body>
</html>